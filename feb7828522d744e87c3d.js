"use strict";(self.webpackChunkwebtool_cropper=self.webpackChunkwebtool_cropper||[]).push([[909],{74:(t,e,a)=>{t.exports=a.p+"img/bbba5c1db5c20f8aa84f.png"},909:(t,e,a)=>{a.r(e),a.d(e,{default:()=>s});const s={render:function(){var t=this,e=t._self._c;return e("div",{staticClass:"container-fluid px-0"},[e("nav",{staticClass:"navbar navbar-dark bg-dark"},[e("div",{staticClass:"navbar-brand d-flex"},[e("div",[t._v("Webtool Cropper")]),e("open-image",{staticClass:"ml-1 mb-0",on:{load:t.loadImg}},[t._v("上傳")])],1)]),e("div",{staticClass:"container-fluid px-0"},[e("button",{staticClass:"btn btn-primary",on:{click:t.crop}},[t._v("裁切")]),e("b-card",{attrs:{"no-body":""}},[e("b-card-body",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-6"},[e("img",{ref:"image",staticClass:"mw-100",attrs:{src:a(74)}})]),e("div",{staticClass:"col-6 d-flex justify-content-center"},[t.outputUrl?e("img",{staticClass:"mw-100 m-auto",attrs:{src:t.outputUrl}}):t._e()])])])],1)],1)])},staticRenderFns:[],components:{OpenImage:{render:function(){var t=this,e=t._self._c;return t.id?e("div",{staticClass:"d-inline-block"},[e("input",{staticClass:"d-none",attrs:{id:t.id,type:"file",accept:"image/*"},on:{change:t.parseFile}}),e("label",{staticClass:"btn btn-secondary btn-sm mb-0",attrs:{for:t.id}},[e("b-icon-card-image")],1)]):t._e()},staticRenderFns:[],props:[],data:function(){return{id:""}},created(){this.id=`img-${this._uid}`},mounted(){},methods:{parseFile:function(t){const e=this,a=t.srcElement,s=a.files[0];a.value="";const i=new window.FileReader;i.addEventListener("load",(function(){const t=i.result,a=new window.Image;a.onload=function(){const{width:s,height:i}=this;Object.assign(e,{width:s,height:i,url:t}),e.$emit("load",a,e)},a.src=t}),!1),s&&i.readAsDataURL(s)}}}},data:()=>({outputUrl:"",cropper:null}),async mounted(){a.e(734).then(a.bind(a,734)),a.e(451).then(a.bind(a,451)),this.initCropper()},updated(){},methods:{loadImg(t){this.cropper.destroy(),this.$refs.image.src=t.src,this.initCropper()},async initCropper(){const t=(await a.e(877).then(a.t.bind(a,877,19))).default;this.cropper=new t(this.$refs.image,{viewMode:1,dragMode:"move",minCropBoxWidth:128,minCropBoxHeight:128,aspectRatio:1,crop(t){console.log(t.detail.x),console.log(t.detail.y),console.log(t.detail.width),console.log(t.detail.height),console.log(t.detail.rotate),console.log(t.detail.scaleX),console.log(t.detail.scaleY)}})},crop(){const t=this.cropper.getCroppedCanvas(),e=t.getContext("2d"),{width:a,height:s}=t,i=e.getImageData(0,0,a,s);e.clearRect(0,0,a,s);const o=a/2,n=s/2,r=Math.min(o,n),c=i.data;for(let t=0;t<s;t++)for(let e=0;e<a;e++){const s=4*(t*a+e);Math.sqrt(Math.pow(e-o,2)+Math.pow(t-n,2))<=r||(c[s]=255,c[s+1]=255,c[s+2]=255,c[s+3]=0)}e.putImageData(i,0,0),this.outputUrl=t.toDataURL("image/png")}}}}}]);